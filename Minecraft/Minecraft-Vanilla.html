<!--
title: Minecraft-Vanilla
description: Mojiang原版服务端
published: true
date: 2023-12-03T08:02:33.746Z
tags: 
editor: ckeditor
dateCreated: 2023-11-22T03:49:03.197Z
-->

<h1>原版配置文件解析说明</h1>
<p><strong>任何基于原版的服务端都逃不开他</strong></p>
<p>本片文章部分内容来自：<a href="https://zh.minecraft.wiki/">中文Minecraft Wiki</a></p>
<p>&nbsp;</p>
<p>首先我们先做一下准备工作，生成配置文件</p>
<ol>
  <li>下载官方提供的<a href="https://minecraft.net/download/server">服务端文件</a></li>
  <li>编写启动脚本并启动服务端</li>
  <li>修改eula.txt文件中的eula为true并再次启动服务端</li>
</ol>
<p>如此我们会得到以下文件</p>
<h1>基本文件结构</h1>
<p>我们以版本<strong>1.20.3-pre1</strong>为例它的文件结构是这样的：</p>
<figure class="image image-style-align-right"><img src="/服务端文件结构.png"></figure>
<p>libraries---------------------------------------依赖库文件夹</p>
<ul>
  <li>com</li>
  <li>commons-io</li>
  <li>io</li>
  <li>it</li>
  <li>net</li>
  <li>org</li>
</ul>
<p>logs---------------------------------------------日志文件夹</p>
<ul>
  <li>latest.log</li>
</ul>
<p>versions---------------------------------------执行程序文件夹</p>
<ul>
  <li>1.20.3-pre1</li>
</ul>
<p>world--------------------------------------------世界数据（地图，数据包等）</p>
<ul>
  <li>data</li>
  <li>datapacks-------------------------------数据包存放目录</li>
  <li>DIM1---------------------------------------下界地图数据</li>
  <li>DIM-1--------------------------------------末地地图数据</li>
  <li>entities</li>
  <li>playerdata</li>
  <li>poi</li>
  <li>region</li>
  <li>level.dat_old</li>
  <li>session.lock</li>
  <li>level.dat</li>
</ul>
<p>banned-ips.json---------------------------存放被Ban的ip文件</p>
<p>banned-players.json--------------------存放被Ban的玩家的用户名和UUID的文件</p>
<p>eula.txt-----------------------------------------Minecraft官方服务端使用协议</p>
<p>ops.json---------------------------------------存放服务器管理员（OP）的文件</p>
<p>server.jar--------------------------------------服务端核心</p>
<p>server.properties-------------------------服务端主要配置文件</p>
<p>Start_G1GC_8G.bat---------------------服务端启动脚本（并非原版自带，需要用户自己创建和编辑）</p>
<p>usercache.json----------------------------<span style="font-family:Arial, Helvetica, sans-serif;">储存玩家的ID和UUID的文件</span></p>
<p>whitelist.json-------------------------------白名单文件</p>
<h1>server.properties</h1>
<p>首先我们来介绍最核心也是最主要的配置文件（server.properties），这个文件包含最基本的配置和自定义功能</p>
<p>server.properties是官方原版服务端自带的配置文件，所以任何基于官方服务端的第三方服务端基本都会有这个文件，他的每一项配置都关乎于服务端的运行也是大多数基于官方服务端的第三方服务端都自带的一个基础配置文件</p>
<p>虽然配置很简陋但是同样很重要，让我们来看看都有哪些可以“优化”和“更改”的配置吧</p>
<p>注：以下部分说明来自<a href="https://zh.minecraft.wiki/w/Server.properties">中文WIki</a></p>
<p>&nbsp;</p>
<h3><strong>是否允许玩家在安装带有飞行功能（作弊）的mod前提下在生存模式下飞行</strong></h3>
<pre><code class="language-plaintext">allow-flight=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>false</strong> -&nbsp;不允许飞行。悬空超过5秒的玩家会被踢出服务器。</li>
  <li><strong>true</strong> -&nbsp;允许飞行。玩家得以使用任何能飞行的mod飞行</li>
</ul>
<blockquote>
  <p>不允许飞行时玩家悬空超过5秒会被踢出服务器，不过我个人测试贴地飞行可以（自带的飞行判定很鸡肋，但是误判最少）</p>
</blockquote>
<p>&nbsp;</p>
<h3><strong>是否允许服务器生成下界，关闭时玩家仍然可以创建下界传送门但是无法使用</strong></h3>
<pre><code class="language-plaintext">allow-nether=true</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>false</strong> -&nbsp;下界传送门不会生效并且不会生成下界</li>
  <li><strong>true</strong> -&nbsp;玩家可以通过下界传送门前往下界</li>
</ul>
<blockquote>
  <p>群组服视情况可关闭（比如你的子服是大厅且不需要下界时，也可以在单独世界禁用）</p>
  <p>Bukkit&nbsp;的bukkit.yml里settings下的allow-end: true是控制末地的（为啥官方只提供下界的关闭选项？看不起末地？）</p>
</blockquote>
<p>&nbsp;</p>
<h3>向所有在线OP发送所执行命令的输出</h3>
<pre><code class="language-plaintext">broadcast-console-to-ops=true</code></pre>
<p>&nbsp;</p>
<ul>
  <li>true - 开启后管理员（OP）在控制台或者聊天栏输入的命令其他管理员也可以看到</li>
  <li>false - 关闭后其他管理员将看不见管理员之间的执行指令</li>
</ul>
<blockquote>
  <p>可以看到所有OP执行的指令（只有同样是OP的玩家才可以哦）不建议关闭</p>
</blockquote>
<p>&nbsp;</p>
<h3>向所有在线OP发送通过RCON执行的输出</h3>
<pre><code class="language-plaintext">broadcast-rcon-to-ops=true</code></pre>
<p>&nbsp;</p>
<ul>
  <li>true - 开启后管理员（OP）在控制台或者聊天栏输入的命令其他管理员也可以看到</li>
  <li>false - 关闭后其他管理员将看不见管理员之间的执行指令</li>
</ul>
<blockquote>
  <p>与上面同理但是不同的是这个可以看到的是通过RCON执行的指令</p>
</blockquote>
<p>&nbsp;</p>
<h3>开启Debug（调试模式）</h3>
<pre><code class="language-plaintext">debug=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭debug（调试模式）</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>该选项默认是隐藏的需要管理员手动添加（这功能没什么用处）</p>
</blockquote>
<p>&nbsp;</p>
<h3>玩家进入服务器的默认游戏难度</h3>
<pre><code class="language-plaintext">difficulty=easy</code></pre>
<p>&nbsp;</p>
<ul>
  <li>peaceful (0) - 和平</li>
  <li>easy (1) - 简单</li>
  <li>normal (2) - 普通</li>
  <li>hard (3) - 困难</li>
</ul>
<blockquote>
  <p>对性能的影响依次从0（低）到3（高），如果没什么特殊需要建议peaceful，难度越高意味着服务器需要越多的CPU性能来处理AI逻辑</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否开启命令方块</h3>
<pre><code class="language-plaintext">enable-command-block=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>命令方块只能通过命令获取且玩家必须是OP权限，建议开启，因为你不清楚什么时候会用到他</p>
</blockquote>
<p>&nbsp;</p>
<h3>可以使用一些支持JMX参数的服务器监听软件配合使用</h3>
<pre><code class="language-plaintext">enable-jmx-monitoring=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>一般人用不上，很鸡肋的功能</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否允许使用GameSpy4协议的服务器监听器。用于获取服务器信息</h3>
<pre><code class="language-plaintext">enable-query=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>同上，鸡肋</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否允许远程访问服务器控制台</h3>
<pre><code class="language-plaintext">enable-rcon=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>由于RCON协议传输数据时没有加密，所以不建议把RCON暴露在互联网上。RCON客户端和服务端交换的所有数据（包括RCON密码）都会泄露给正在监听此连接的人</p>
</blockquote>
<p>&nbsp;</p>
<h3>使服务器在服务器列表中看起来是“在线”的</h3>
<pre><code class="language-plaintext">enable-status=true</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>就是将服务器状态上传到一个服务器用以缓存在线状态，可以加快服务器列表刷新，如果你的服务端是某个群组端（Velocity，Bungee）下的子服，建议关闭节省网络开销，因为此时服务器的在线状态由群组端（Velocity，Bungee）提供</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否要求玩家必须具有Mojang签名的公钥才能进入服务器</h3>
<pre><code class="language-plaintext">enforce-secure-profile=true</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>true</strong> - 不具有Mojang签名的公钥的玩家不能进入服务器</li>
  <li><strong>false</strong> - 不具有Mojang签名的公钥的玩家也可进入服务器</li>
</ul>
<blockquote>
  <p>验证玩家是否是使用的官方启动器登录的游戏，因为目前只有官启有公钥，建议关闭，卵用没有</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否强制执行白名单</h3>
<pre><code class="language-plaintext">enforce-whitelist=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>true</strong> -&nbsp;不在白名单上的用户会被踢出</li>
  <li><strong>false</strong> -&nbsp;不在白名单上的在线用户不会被踢出</li>
</ul>
<blockquote>
  <p>设置为true时whitelist.json为白名单状态，false时为黑名单</p>
</blockquote>
<p>&nbsp;</p>
<h3>控制服务端发到当客户端的实体数据显示范围（百分比）整数（10-1000）</h3>
<pre><code class="language-plaintext">entity-broadcast-range-percentage=100</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>只是客户端的显示范围而已实际上实体的活动范围还是正常的，但他可以减少网络资源的占用，网络环境不好的可以适当的减少这个值，个人建议80左右</p>
</blockquote>
<p>&nbsp;</p>
<h3>强制玩家加入时为默认游戏模式</h3>
<pre><code class="language-plaintext">force-gamemode=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>false</strong> -&nbsp;玩家将以退出前的游戏模式加入</li>
  <li><strong>true</strong> -&nbsp;玩家总是以默认游戏模式加入</li>
</ul>
<blockquote>
  <p>一般不会用得到，小游戏或空岛服可以根据需要改动</p>
</blockquote>
<p>&nbsp;</p>
<p>function-permission-level=2</p>
<p>gamemode=survival</p>
<p>generate-structures=true</p>
<p>generator-settings={}</p>
<p>hardcore=false</p>
<p>hide-online-players=false</p>
<p>initial-disabled-packs=</p>
<p>initial-enabled-packs=vanilla</p>
<p>level-name=world</p>
<p>level-seed=</p>
<p>level-type=minecraft\:normal</p>
<p>log-ips=true</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>最大建筑高度（1.18时移除）</h3>
<pre><code class="language-plaintext">max-build-height=256</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>老版本用不上，新版本直接没了</p>
</blockquote>
<p>max-chained-neighbor-updates=1000000</p>
<p>&nbsp;</p>
<h3>服务器最大玩家人数</h3>
<pre><code class="language-plaintext">max-players=20</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>无脑999就行了，反正你的机器也装不下那么多人</p>
</blockquote>
<p>&nbsp;</p>
<p>max-tick-time=60000</p>
<p>max-world-size=29999984</p>
<p>motd=A Minecraft Server</p>
<p>&nbsp;</p>
<h3>服务器数据包压缩阈值</h3>
<pre><code class="language-plaintext">network-compression-threshold=256</code></pre>
<p>&nbsp;</p>
<ul>
  <li>-1 - 关闭压缩</li>
  <li>0 - 全部压缩</li>
</ul>
<blockquote>
  <p>当群组端和子服处于一个网络下建议关闭，因为浪费性能且没什么卵用，数值越小（-1除外）需要耗费的CPU性能越多，同时越节省服务器带宽，反之亦然（看你的服务器性能和带宽适当调整）</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否开启正版验证</h3>
<pre><code class="language-plaintext">online-mode=true</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>盗版（离线）服务器需要第三方验证系统（或插件）（不然谁都能进来）如果有正版的话还是建议开启</p>
</blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>op-permission-level=4</p>
<p>player-idle-timeout=0</p>
<p>prevent-proxy-connections=false</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>玩家是否可以攻击其他玩家</h3>
<pre><code class="language-plaintext">pvp=true</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 开启</li>
</ul>
<blockquote>
  <p>关闭状态下由玩家造成的间接伤害（例如熔岩，火，TNT，水，沙子和沙砾）还是可以造成伤害的</p>
</blockquote>
<p>&nbsp;</p>
<h3>设置监听服务器的端口号 整数（1-65534）</h3>
<pre><code class="language-plaintext">query.port=25565</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>需要将enable-query设为true</p>
</blockquote>
<p>&nbsp;</p>
<p>rate-limit=0</p>
<p>&nbsp;</p>
<h3>设置RCON远程访问的密码</h3>
<pre><code class="language-plaintext">rcon.password=</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>需要将enable-rcon设为true</p>
</blockquote>
<p>&nbsp;</p>
<h3>设置RCON远程访问的端口号 整数（1-65534)</h3>
<pre><code class="language-plaintext">rcon.port=25575</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>需要将enable-rcon设为true</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否强制启用资源包</h3>
<pre><code class="language-plaintext">require-resource-pack=false</code></pre>
<p>&nbsp;</p>
<ul>
  <li>false - 关闭</li>
  <li>true - 强制玩家使用服务器指定的资源包进入</li>
</ul>
<blockquote>
  <p>当此选项启用（true）时，玩家会被提示作出选择（是否启用服务器资源包），如果玩家拒绝则会被强制断开与服务器的连接</p>
</blockquote>
<p>&nbsp;</p>
<p>resource-pack-id=</p>
<p>resource-pack-prompt=</p>
<p>&nbsp;</p>
<h3>资源包的SHA-1值</h3>
<pre><code class="language-plaintext">resource-pack-sha1=</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>客户端可以根据服务端提供的SHA-1值来验证客户端资源包的完整性，填写错误的话玩家会进不来</p>
</blockquote>
<p>&nbsp;</p>
<h3>资源包指定URI链接</h3>
<pre><code class="language-plaintext">resource-pack=</code></pre>
<p>以下为各版本数据包大小的限制</p>
<ul>
  <li>50 MiB（1.15-pre5前）</li>
  <li>100 MiB（1.15-pre5到1.18-pre8）</li>
  <li>250 MiB（1.18-rc1起）</li>
</ul>
<blockquote>
  <p>客户端会根据此来链接来下载资源包，下载成功或失败由客户端记录，而非服务器，如果链接失效或无法访问的话就GG咯</p>
</blockquote>
<p>&nbsp;</p>
<h3>绑定服务器接收玩家IP</h3>
<pre><code class="language-plaintext">server-ip=</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>意味着你只能接受来自该IP中的玩家，如果你的服务器是群组服的话还是建议绑定群组端（一般为127.0.0.1）IP，同时配合spigot.yml中的bungeecord: true可以避免亿些问题（比如玩家可以绕过群组端直接登录服务器）</p>
</blockquote>
<p>&nbsp;</p>
<h3>服务器接入端口 整数（1-65534）</h3>
<pre><code class="language-plaintext">server-port=25565</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>玩家应该使用哪个端口登录服务器，在使用群组服的时候需要在相关群组端配置相同端口，注意不要与其他子服端口冲突</p>
</blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>simulation-distance=10</p>
<h3>是否生成动物</h3>
<pre><code class="language-plaintext">spawn-animals=true</code></pre>
<ul>
  <li><strong>true</strong> -&nbsp;动物可以正常生成</li>
  <li><strong>false</strong> -&nbsp;动物生成后会立即消失</li>
</ul>
<blockquote>
  <p>我不知道为啥Mojang的代码要这样写，关闭这个选项可以节省更多的CPU算力，但是生成后立即消失我还是没绷住，大厅服一般不需要可以关闭</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否生成攻击型生物（怪物）</h3>
<pre><code class="language-plaintext">spawn-monsters=true</code></pre>
<ul>
  <li><strong>true</strong> -&nbsp;怪物会生成于夜晚和黑暗处。</li>
  <li><strong>false</strong> -&nbsp;不会有任何怪物</li>
</ul>
<blockquote>
  <p>如果difficulty=0（即难度设置为和平）的话，该属性值不会有任何影响，大厅服一般不需要可以关闭</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否允许村民生成</h3>
<pre><code class="language-plaintext">spawn-npcs=true</code></pre>
<ul>
  <li><strong>true</strong> -&nbsp;启用</li>
  <li><strong>false</strong> -&nbsp;禁用生成</li>
</ul>
<blockquote>
  <p>大厅或空岛服，小游戏等一般不需要可以关闭（一些服务器主城地图之外也是有地方可以生成村民的，怪物和动物同理）</p>
</blockquote>
<p>&nbsp;</p>
<h3>出生点区块保护范围</h3>
<pre><code class="language-plaintext">spawn-protection=16</code></pre>
<blockquote>
  <p>进行2x+1的运算来决定出生点的保护半径（为1=3x3&nbsp;为2=5x5&nbsp;为3=7x7&nbsp;以此类推）设置为0将不会禁用出生点保护，但会保护位于出生点中心的方快（13w05a前），设置为0会禁用出生点保护（13w05a后）</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否开启同步模式写入区块文件</h3>
<pre><code class="language-plaintext">sync-chunk-writes=true</code></pre>
<ul>
  <li><strong>true</strong> -&nbsp;启用同步模式</li>
  <li><strong>false</strong> -&nbsp;禁用（异步模式？）</li>
</ul>
<blockquote>
  <p>个人感觉关闭之后“可能”是最好的（关闭之后貌似是异步化？）哪位勇士试一下？</p>
</blockquote>
<p>&nbsp;</p>
<h3>暂时未知作用</h3>
<pre><code class="language-plaintext">text-filtering-config=</code></pre>
<blockquote>
  <p>WIKI上没写我自己也没有研究明白</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否使用针对Linux平台的数据包收发优化</h3>
<pre><code class="language-plaintext">use-native-transport=true</code></pre>
<ul>
  <li><strong>true</strong> -&nbsp;启用</li>
  <li><strong>false</strong> -&nbsp;禁用</li>
</ul>
<blockquote>
  <p>Windows下也会生成这个选项且默认也是开启状态，一般不用管他</p>
</blockquote>
<p>&nbsp;</p>
<h3>玩家最大视距 整数（3-32）</h3>
<pre><code class="language-plaintext">view-distance=10</code></pre>
<blockquote>
  <p>Paper中的world-settings下的viewdistances里面的no-tick-view-distance（新版已经去除这个功能）可以设置虚假视距范围（不能超过也不能小于这里的值）</p>
  <ul>
    <li>虚假视距范围：这个范围内的实体或红石不会被计算直到脱离“虚假视距范围”（当前视距内）才能正常工作（个人感觉不如在客户端安装一个MOD，例如：<a href="https://modrinth.com/mod/bobby">Bobby</a>）</li>
  </ul>
</blockquote>
<p>&nbsp;</p>
<h3>是否启用服务器的白名单功能</h3>
<pre><code class="language-plaintext">white-list=false</code></pre>
<ul>
  <li><strong>false</strong> -&nbsp;不使用白名单</li>
  <li><strong>true</strong> -&nbsp;从whitelist.json文件加载白名单</li>
</ul>
<blockquote>
  <p>当启用时，只有白名单上的玩家才能连接到服务器</p>
</blockquote>
