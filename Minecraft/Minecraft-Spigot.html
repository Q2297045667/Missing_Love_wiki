<!--
title: Minecraft-Spigot
description: Spigot的配置文件解析说明
published: true
date: 2024-01-04T17:16:44.532Z
tags: spigot
editor: ckeditor
dateCreated: 2024-01-02T16:03:02.772Z
-->

<h1>Spigot配置解析</h1>
<p>&nbsp; &nbsp; Spigot是SpigotMC团队基于CraftBukkit制作的一个高性能和修复超多BUG的服务端。</p>
<p>Spigot在其BukkitAPI的基础上添加了很多自己的API接口（Spigot API）</p>
<p>本片文章部分内容来自：<a href="https://www.spigotmc.org/wiki/spigot/">SpigotWiki</a>，<a href="https://github.com/LingLuoyunOS/spigotmc-cn">Spigot 中文开发指南</a></p>
<p>&nbsp;</p>
<p>首先我们先做一下准备工作，生成配置文件</p>
<ol>
  <li>下载由spigotmc提供的构建工具（<a href="https://hub.spigotmc.org/jenkins/job/BuildTools/">BuildTools</a>）</li>
  <li>按照<a href="https://hub.spigotmc.org/jenkins/job/BuildTools/">BuildToolsWiki</a>编写工具启动脚本，例如版本1.20.4，我们需要在脚本中写入<code><strong>java</strong> -jar BuildTools.jar --rev 1.20.4</code></li>
  <li>首次编译等待大概5分钟即可，如果编译时间过长，可以使用“科学上网”</li>
  <li>编译过后我们得到文件“spigot-1.20.4.jar”，将其放入空文件夹</li>
  <li>编写常规启动脚本并启动服务端</li>
  <li>修改eula.txt文件中的eula为true并再次启动服务端</li>
</ol>
<p>&nbsp;</p>
<h1>基本文件结构</h1>
<p>相比较<a href="/Minecraft/Minecraft-Bukkit">CraftBukkit</a>我们会额外得到以下文件</p>
<p>plugins\PluginMetrics</p>
<ul>
  <li>config.yml··························································控制stats相关的配置文件</li>
</ul>
<p>spigot.yml································································Spigot的核心配置文件</p>
<p>&nbsp;</p>
<h1>spigot.yml</h1>
<p>以下是对spigot.yml文件的详细解析</p>
<h2>settings:（全局配置）</h2>
<h3>是否开启DEBUG模式</h3>
<pre><code class="language-plaintext">debug: false</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li><strong>false</strong> -&nbsp;关闭</li>
  <li><strong>true</strong> -&nbsp;开启</li>
</ul>
<blockquote>
  <p>对插件开发和测试会有一些作用，一般建议关闭，在开启的时候会浪费过多的性能来输出文本</p>
</blockquote>
<p>&nbsp;</p>
<h3>设置线程转储无响应的时间</h3>
<pre><code class="language-plaintext">timeout-time: 60</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li>1 - 999 整数型（秒）</li>
</ul>
<blockquote>
  <p>在控制台执行<a href="https://cloud.tencent.com/developer/ask/sof/43446">线程转储</a>之前，服务器应无响应多长时间（以秒为单位），如果已配置，则需要关闭并重新启动服务端</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否允许在服务端崩溃后调用脚本重启服务端</h3>
<pre><code class="language-plaintext">restart-on-crash: true</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li><strong>false</strong> -&nbsp;关闭</li>
  <li><strong>true</strong> -&nbsp;开启</li>
</ul>
<blockquote>
  <p>控制发生崩溃时服务器是否会自动尝试重新启动服务器，需要搭配 restart-script: 选项使用，如果你使用面板或其他除脚本之外的启动方式，不建议使用这个功能</p>
</blockquote>
<p>&nbsp;</p>
<h3>设置启动/重启脚本</h3>
<pre><code class="language-plaintext">restart-script: ./start.sh</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li>字符串</li>
</ul>
<blockquote>
  <p>服务器启动脚本的位置。此路径将用于 /restart 命令和崩溃时重新启动（restart-on-crash: true）选项，Windows文件后缀为.bat，Linux为.sh</p>
</blockquote>
<p>&nbsp;</p>
<h3>设置Netty网络连接的线程数</h3>
<pre><code class="language-plaintext">netty-threads: 4</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li>1 - 16 整数型</li>
</ul>
<blockquote>
  <p>一般来说不建议调整该配置，如果你有100名玩家且CPU核心数8个以上个人建议适当增加，最大不建议超过8，如果你使用群组端等代理软件建议根据网络环境设置</p>
</blockquote>
<p>&nbsp;</p>
<h3>设置BOSS生物属性</h3>
<pre><code class="language-plaintext">  attribute:
    maxHealth:
      max: 2048.0
    movementSpeed:
      max: 2048.0
    attackDamage:
      max: 2048.0</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li>maxHealth:·························································生命值</li>
  <li>&nbsp; &nbsp; &nbsp; max: 2048.0··················································最大生命值设定（浮点数）</li>
  <li>movementSpeed:···············································移动速度</li>
  <li>&nbsp; &nbsp; &nbsp; max: 2048.0··················································最大移动速度设定（浮点数）</li>
  <li>attackDamage:···················································攻击伤害</li>
  <li>&nbsp; &nbsp; &nbsp; max: 2048.0··················································最大攻击伤害设定（浮点数）</li>
</ul>
<blockquote>
  <p>这里的设置指的是BOSS生物属性的“上限”并非是强制性固定的数值，比方说某个插件或数据包给末影龙增加10000点攻击或生命，那么末影龙的最大攻击或生命只能被限制在2048，需要手动配置最高上限</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否在日志中记录村民的死亡记录</h3>
<pre><code class="language-plaintext">log-villager-deaths: true</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li><strong>false</strong> -&nbsp;关闭</li>
  <li><strong>true</strong> -&nbsp;开启</li>
</ul>
<blockquote>
  <p>记录村民死亡的地点和原因（没了），在大厅或者生电服等村民死亡率比较高的服务器中建议关闭，一般人应该不会吃饱了撑的来日志文件中找被噶掉的村民吧？不会吧，不会吧？</p>
</blockquote>
<p>&nbsp;</p>
<h3>是否在日志中记录被玩家命名过的生物的死亡记录</h3>
<pre><code class="language-plaintext">log-named-deaths: true</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li><strong>false</strong> -&nbsp;关闭</li>
  <li><strong>true</strong> -&nbsp;开启</li>
</ul>
<blockquote>
  <p>和上一个选项的意思差不多，一般建议禁止，因为一些插件（如精英怪等）会给生物命名如果开启这个选项可能会造成后台控制台大量刷屏，<a href="https://www.mcbbs.net/thread-1251852-1-1.html">例子</a></p>
</blockquote>
<p>&nbsp;</p>
<h3>是否切换在新玩家加入时实时储存数据</h3>
<pre><code class="language-plaintext">save-user-cache-on-stop-only: false</code></pre>
<p>&nbsp;以下为具体参数：</p>
<ul>
  <li><strong>false</strong> -&nbsp;实时储存玩家数据</li>
  <li><strong>true</strong> -&nbsp;z只在服务器关闭时或玩家退出时储存数据</li>
</ul>
<blockquote>
  <p>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>messages:（消息输出）</h2>
<p>&nbsp;</p>
<h2>world-settings:（世界配置）</h2>
<p>&nbsp;</p>
<h2>advancements:（成就）</h2>
<p>&nbsp;</p>
<h2>players:（玩家）</h2>
<p>&nbsp;</p>
<h2>commands:（指令）</h2>
<p>&nbsp;</p>
<h2>config-version:（文件版本）</h2>
<h2>stats:（状态）</h2>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
